<?php

namespace Brioche\CoreBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * BriocheRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class BriocheRepository extends EntityRepository
{
    public function findFull($id)
    {
        return $this->_em->createQueryBuilder()
                ->select('b, r, s, e, cl, ci')
                ->from('BriocheCoreBundle:Brioche', 'b')
                ->leftJoin('b.round', 'r')
                ->leftJoin('b.size', 's')
                ->leftJoin('b.extra', 'e')
                ->leftJoin('b.client', 'cl')
                ->leftJoin('cl.city', 'ci')
                ->where('b.id = :id')
                ->setParameters(array(
                    ':id' => $id
                ))
                ->getQuery()
                ->getOneOrNullResult()
        ;
    }
}
